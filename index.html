<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tomorrow Markdown ç¼–è¾‘å™¨ | new defination of markdown</title>
    <meta name="description" content="å®æ—¶ Markdown ç¼–è¾‘å™¨ï¼Œæ”¯æŒæš—è‰²æ¨¡å¼ã€è¯­æ³•é«˜äº®å’Œæœ¬åœ°ä¿å­˜">
    
    <!-- ä½¿ç”¨å›½å†…å¯è®¿é—®çš„ CDN -->
    <!-- Font Awesome - ä½¿ç”¨ staticfile é•œåƒ -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css">
    
    <!-- highlight.js æ ·å¼ - ä½¿ç”¨ staticfile é•œåƒ -->
    <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/11.8.0/styles/github-dark.min.css">
    
    <!-- æœ¬åœ°æ ·å¼ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Favicon -->
    <link rel="icon" href="https://ik.imagekit.io/terryzhang/IMG_7113.jpeg" type="image/x-icon">
    
    <!-- å¤‡ç”¨åŠ è½½æ–¹æ¡ˆ -->
    <script>
    (function() {
        // èµ„æºåŠ è½½ç›‘æ§
        window.resourceStatus = {
            loaded: false,
            retryCount: 0
        };
        
        // å¤‡ç”¨èµ„æºåˆ—è¡¨
        const fallbackResources = {
            'font-awesome': [
                'https://cdn.staticfile.org/font-awesome/6.4.0/css/all.min.css',
                'https://cdn.bootcdn.net/ajax/libs/font-awesome/6.4.0/css/all.min.css',
                'https://lib.baomitu.com/font-awesome/6.4.0/css/all.min.css'
            ],
            'highlight-style': [
                'https://cdn.staticfile.org/highlight.js/11.8.0/styles/github-dark.min.css',
                'https://cdn.bootcdn.net/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css'
            ],
            'marked': [
                'https://cdn.staticfile.org/marked/12.0.0/marked.min.js',
                'https://cdn.bootcdn.net/ajax/libs/marked/12.0.0/marked.min.js',
                'https://lib.baomitu.com/marked/12.0.0/marked.min.js'
            ],
            'highlight': [
                'https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js',
                'https://cdn.bootcdn.net/ajax/libs/highlight.js/11.8.0/highlight.min.js',
                'https://lib.baomitu.com/highlight.js/11.8.0/highlight.min.js'
            ]
        };
        
        // åŠ¨æ€åŠ è½½å¤‡ç”¨èµ„æº
        function loadResource(type, index = 0) {
            const sources = fallbackResources[type];
            if (!sources || index >= sources.length) return false;
            
            if (type.includes('css')) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.href = sources[index];
                link.onerror = () => loadResource(type, index + 1);
                document.head.appendChild(link);
            } else {
                const script = document.createElement('script');
                script.src = sources[index];
                script.onerror = () => loadResource(type, index + 1);
                document.head.appendChild(script);
            }
            return true;
        }
        
        // å¦‚æœä¸»èµ„æºåŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨æ–¹æ¡ˆ
        window.addEventListener('load', function() {
            setTimeout(function() {
                // æ£€æŸ¥ Font Awesome æ˜¯å¦åŠ è½½
                const testIcon = document.createElement('i');
                testIcon.className = 'fas fa-check';
                document.body.appendChild(testIcon);
                
                setTimeout(function() {
                    const computed = window.getComputedStyle(testIcon);
                    const fontFamily = computed.fontFamily || '';
                    
                    if (!fontFamily.includes('Font Awesome')) {
                        console.warn('Font Awesome åŠ è½½å¤±è´¥ï¼Œä½¿ç”¨å¤‡ç”¨èµ„æº');
                        loadResource('font-awesome');
                    }
                    
                    document.body.removeChild(testIcon);
                }, 100);
            }, 1000);
        });
    })();
    </script>
</head>
<body>
    <div class="container">
        <header class="header">
            <div class="logo">
                <i class="fa-brands fa-markdown"></i>
                <h1>Tomorrow Markdown ç¼–è¾‘å™¨</h1>
                <span class="version">v1.0</span>
            </div>
            <div class="controls">
                <div class="theme-toggle">
                    <button id="themeToggle" class="btn-icon" type="button">
                        <i class="fas fa-moon"></i>
                        <span>æš—è‰²æ¨¡å¼</span>
                    </button>
                </div>
                <div class="word-count">
                    <i class="fas fa-file-word"></i>
                    <span id="wordCount">0</span> å­—
                </div>
            </div>
        </header>

        <div class="toolbar">
            <div class="toolbar-group">
                <button class="toolbar-btn" data-insert="# " type="button">
                    <i class="fas fa-heading"></i>
                </button>
                <button class="toolbar-btn" data-insert="**text**" type="button">
                    <i class="fas fa-bold"></i>
                </button>
                <button class="toolbar-btn" data-insert="*text*" type="button">
                    <i class="fas fa-italic"></i>
                </button>
                <button class="toolbar-btn" data-insert="~~text~~" type="button">
                    <i class="fas fa-strikethrough"></i>
                </button>
            </div>
            <div class="toolbar-group">
                <button class="toolbar-btn" data-insert="- [ ] " type="button">
                    <i class="fas fa-tasks"></i>
                </button>
                <button class="toolbar-btn" data-insert="1. " type="button">
                    <i class="fas fa-list-ol"></i>
                </button>
                <button class="toolbar-btn" data-insert="- " type="button">
                    <i class="fas fa-list-ul"></i>
                </button>
                <button class="toolbar-btn" data-insert="> " type="button">
                    <i class="fas fa-quote-right"></i>
                </button>
            </div>
            <div class="toolbar-group">
                <button class="toolbar-btn" data-insert="[é“¾æ¥æ–‡æœ¬](url)" type="button">
                    <i class="fas fa-link"></i>
                </button>
                <button class="toolbar-btn" data-insert="![å›¾ç‰‡æè¿°](url)" type="button">
                    <i class="fas fa-image"></i>
                </button>
                <button class="toolbar-btn" data-insert="```\ncode\n```" type="button">
                    <i class="fas fa-code"></i>
                </button>
                <button class="toolbar-btn" data-insert="`code`" type="button">
                    <i class="fas fa-terminal"></i>
                </button>
            </div>
            <div class="toolbar-group">
                <button class="toolbar-btn" data-insert="| æ ‡é¢˜ | æ ‡é¢˜ |\n| --- | --- |\n| å†…å®¹ | å†…å®¹ |" type="button">
                    <i class="fas fa-table"></i>
                </button>
                <button class="toolbar-btn" data-insert="---" type="button">
                    <i class="fas fa-minus"></i>
                </button>
                <button id="saveBtn" class="toolbar-btn success" type="button">
                    <i class="fas fa-save"></i>
                </button>
                <button id="clearBtn" class="toolbar-btn danger" type="button">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        </div>

        <div class="editor-container">
            <div class="editor-section">
                <div class="section-header">
                    <h2><i class="fas fa-edit"></i> ç¼–è¾‘åŒº</h2>
                    <button id="copyBtn" class="btn-sm" type="button">
                        <i class="fas fa-copy"></i> å¤åˆ¶
                    </button>
                </div>
                <textarea id="editor" class="editor" placeholder="# å¼€å§‹ç¼–å†™ Markdown..."># Markdown ç¼–è¾‘å™¨

## åŠŸèƒ½ç‰¹æ€§

- **å®æ—¶é¢„è§ˆ** - å·¦ä¾§ç¼–è¾‘ï¼Œå³ä¾§å³æ—¶æ¸²æŸ“
- **è¯­æ³•é«˜äº®** - ä»£ç å—è‡ªåŠ¨ç€è‰²
- **æœ¬åœ°å­˜å‚¨** - å†…å®¹è‡ªåŠ¨ä¿å­˜
- **ä¸»é¢˜åˆ‡æ¢** - æ”¯æŒäº®è‰²/æš—è‰²æ¨¡å¼
- **å“åº”å¼è®¾è®¡** - é€‚é…å„ç§è®¾å¤‡

## ç¤ºä¾‹ä»£ç 

\`\`\`javascript
// JavaScript ç¤ºä¾‹
function hello() {
    console.log("Hello, Markdown!");
    return (
        <div className="app">
            <h1>React ç»„ä»¶</h1>
        </div>
    );
}
\`\`\`

## è¡¨æ ¼ç¤ºä¾‹

| åŠŸèƒ½ | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|
| å®æ—¶é¢„è§ˆ | âœ… | å³æ—¶æ¸²æŸ“ |
| æš—è‰²æ¨¡å¼ | âœ… | æŠ¤çœ¼æ¨¡å¼ |
| æœ¬åœ°ä¿å­˜ | âœ… | è‡ªåŠ¨ä¿å­˜ |
| å¯¼å‡ºåŠŸèƒ½ | âœ… | ä¸‹è½½æ–‡ä»¶ |

> ğŸ’¡ æç¤ºï¼šä½¿ç”¨å·¥å…·æ å¿«é€Ÿæ’å…¥æ ¼å¼

**å¼€å§‹åˆ›ä½œå§ï¼**</textarea>
            </div>
            
            <div class="preview-section">
                <div class="section-header">
                    <h2><i class="fas fa-eye"></i> é¢„è§ˆåŒº</h2>
                    <button id="downloadBtn" class="btn-sm btn-primary" type="button">
                        <i class="fas fa-download"></i> ä¸‹è½½
                    </button>
                </div>
                <div id="preview" class="preview"></div>
            </div>
        </div>

        <footer class="footer">
            <div class="footer-content">
                <div class="footer-info">
                    <p>
                        <i class="fas fa-code"></i> åŸºäº Marked.js |
                        <i class="fas fa-cloud"></i> æ”¯æŒ Vercel |
                        <i class="fas fa-sync-alt"></i> è‡ªåŠ¨ä¿å­˜
                    </p>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/terryzhangxr/tomorrow-markdown-editor" target="_blank" rel="noopener noreferrer" class="footer-link">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                    <a href="https://vercel.com/new/clone?repository-url=https%3A%2F%2Fgithub.com%2Fterryzhangxr%2Ftomorrow-markdown-editor" target="_blank" rel="noopener noreferrer" class="footer-link">
                        <i class="fas fa-rocket"></i> Vercel
                    </a>
                </div>
            </div>
        </footer>
    </div>

    <!-- ä½¿ç”¨å›½å†…å¯é çš„ CDN èµ„æº -->
    <!-- marked.js - ä¸ƒç‰›äº‘ CDN -->
    <script src="https://cdn.staticfile.org/marked/12.0.0/marked.min.js"></script>
    
    <!-- highlight.js - ä¸ƒç‰›äº‘ CDN -->
    <script src="https://cdn.staticfile.org/highlight.js/11.8.0/highlight.min.js"></script>
    
    <!-- æœ¬åœ°è„šæœ¬ -->
    <script src="script.js"></script>
    
    <!-- å¤‡ç”¨åŠ è½½ -->
    <script>
    // æ£€æŸ¥èµ„æºåŠ è½½çŠ¶æ€
    window.addEventListener('load', function() {
        console.log('èµ„æºåŠ è½½æ£€æŸ¥...');
        
        // å¦‚æœ marked æœªåŠ è½½ï¼Œå°è¯•å¤‡ç”¨æº
        if (typeof marked === 'undefined') {
            console.warn('marked.js åŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æº');
            const script = document.createElement('script');
            script.src = 'https://cdn.bootcdn.net/ajax/libs/marked/12.0.0/marked.min.js';
            document.body.appendChild(script);
        }
        
        // å¦‚æœ highlight æœªåŠ è½½ï¼Œå°è¯•å¤‡ç”¨æº
        if (typeof hljs === 'undefined') {
            console.warn('highlight.js åŠ è½½å¤±è´¥ï¼Œå°è¯•å¤‡ç”¨æº');
            const script = document.createElement('script');
            script.src = 'https://cdn.bootcdn.net/ajax/libs/highlight.js/11.8.0/highlight.min.js';
            document.body.appendChild(script);
        }
        
        // æ˜¾ç¤ºåŠ è½½å®Œæˆæ¶ˆæ¯
        setTimeout(function() {
            console.log('âœ… ç¼–è¾‘å™¨èµ„æºåŠ è½½å®Œæˆ');
        }, 500);
    });
    </script>
</body>
</html>
